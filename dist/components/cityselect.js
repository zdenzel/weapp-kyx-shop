"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_cityData=require("./../utils/cityData.js"),_cityData2=_interopRequireDefault(_cityData),CitySelect=function(t){function e(){var t,i,s,n;_classCallCheck(this,e);for(var a=arguments.length,o=Array(a),r=0;r<a;r++)o[r]=arguments[r];return i=s=_possibleConstructorReturn(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o))),s.props={selected:{type:String,default:"",twoWay:!0,coerce:function(t){return t||""}}},s.data={cityData:[],provinces:[],citys:[],countys:[],province:"",city:"",county:"",value:[0,0,0],values:[0,0,0],isReady:!1},s.events={showCityselect:function(){var t=this.$wxpage.selectComponent(".J_Cityselect");t&&t.show(),this.onReinit()},hideCityselect:function(){var t=this.$wxpage.selectComponent(".J_Cityselect");t&&t.hide()}},s.watch={},s.methods={tap:function(){},onCancel:function(){this.$emit("hideCityselect")},onConfirm:function(){this.selected=this.province+" "+this.city+" "+this.county,this.$emit("hideCityselect"),this.$apply()},onChange:function(t){var e=t.detail.value,i=this.values;if(e[0]!=i[0]){for(var s=[],n=[],a=0;a<this.cityData[e[0]].sub.length;a++)s.push(this.cityData[e[0]].sub[a].name);for(var o=0;o<this.cityData[e[0]].sub[0].sub.length;o++)n.push(this.cityData[e[0]].sub[0].sub[o].name);return this.province=this.provinces[e[0]],this.city=this.cityData[e[0]].sub[0].name,this.citys=s,this.county=this.cityData[e[0]].sub[0].sub[0].name,this.countys=n,this.values=e,void(this.value=[e[0],0,0])}if(e[1]!=i[1]){for(var r=[],u=0;u<this.cityData[e[0]].sub[e[1]].sub.length;u++)r.push(this.cityData[e[0]].sub[e[1]].sub[u].name);return this.city=this.citys[e[1]],this.county=this.cityData[e[0]].sub[e[1]].sub[0].name,this.countys=r,this.values=e,void(this.value=[e[0],e[1],0])}if(e[2]!=i[2])return this.county=this.countys[e[2]],void(this.values=e)}},n=i,_possibleConstructorReturn(s,n)}return _inherits(e,t),_createClass(e,[{key:"onReinit",value:function(){this.isReady=!1;for(var t=this.selected.split(" ")||[],e=[],i=[],s=[],n=0;n<this.cityData.length;n++)e.push(this.cityData[n].name);var a=e.findIndex(function(e){return e==t[0]});a=a<0?0:a;for(var o=0;o<this.cityData[a].sub.length;o++)i.push(this.cityData[a].sub[o].name);var r=i.findIndex(function(e){return e==t[1]});r=r<0?0:r;for(var u=0;u<this.cityData[a].sub[r].sub.length;u++)s.push(this.cityData[a].sub[r].sub[u].name);var c=s.findIndex(function(e){return e==t[2]});c=c<0?0:c,this.provinces=e,this.citys=i,this.countys=s,this.value=[a,r,c],this.values=[a,r,c],this.province=this.cityData[a].name,this.city=this.cityData[a].sub[r].name,this.county=this.cityData[a].sub[r].sub[c].name,this.isReady=!0,this.$apply()}},{key:"onLoad",value:function(){this.cityData=_cityData2.default,this.onReinit()}}]),e}(_wepy2.default.component);exports.default=CitySelect;